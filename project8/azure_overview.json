{"title":"Azure (Overview)","description":"This dashboard provides a high-level view of your Azure stack, displaying key performance and resource metrics for your SQL Databases, VMs, and App Services. Further reading on Azure monitoring:\n\n- [How to monitor Azure SQL Databases with Datadog](https://www.datadoghq.com/blog/monitor-azure-sql-databases-datadog/)\n\n- [How to monitor Azure VMs with Datadog](https://www.datadoghq.com/blog/monitor-azure-vms-using-datadog/)\n\n- [How to monitor Azure App Service applications with Datadog](https://www.datadoghq.com/blog/monitor-azure-app-service-applications-datadog/)\n\n- [Datadogâ€™s Azure integration docs](https://docs.datadoghq.com/integrations/azure/)\n\nClone this template dashboard to make changes and add your own graph widgets.","widgets":[{"id":0,"layout":{"x":23,"y":12,"width":16,"height":9},"definition":{"title":"Running","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$region,$subscription,$tenant,$group,status:running,$app}.fill(null), 0)","aggregator":"max"}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0}},{"id":1,"layout":{"x":96,"y":12,"width":21,"height":9},"definition":{"title":"Min CPU utilization","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"query_value","requests":[{"q":"avg:azure.vm.percentage_cpu{$tenant,$subscription,$region,$group,$app}","aggregator":"min"}],"autoscale":true,"custom_unit":"%","text_align":"center","custom_links":[],"precision":1}},{"id":2,"layout":{"x":118,"y":12,"width":22,"height":9},"definition":{"title":"Max CPU utilization","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"query_value","requests":[{"q":"avg:azure.vm.percentage_cpu{$tenant,$subscription,$region,$group,$app}","aggregator":"max"}],"autoscale":true,"custom_unit":"%","text_align":"center","custom_links":[],"precision":1}},{"id":3,"layout":{"x":73,"y":45,"width":67,"height":8},"definition":{"type":"note","content":"SQL \nDatabases","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":4,"layout":{"x":4,"y":3,"width":18,"height":18},"definition":{"type":"image","url":"/static/images/logos/azure_large.svg","sizing":"center"}},{"id":5,"layout":{"x":73,"y":64,"width":67,"height":18},"definition":{"title":"DTU utilization by name","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:azure.sql_servers_databases.dtu_consumption_percent{$tenant,$subscription,$region,$group,$app} by {server_name,name}","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":6,"layout":{"x":4,"y":45,"width":67,"height":8},"definition":{"type":"note","content":"App Services","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":7,"layout":{"x":73,"y":22,"width":67,"height":21},"definition":{"title":"CPU utilization by name","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"top(avg:azure.vm.percentage_cpu{$tenant,$subscription,$region,$group,$app} by {name}, 10, 'mean', 'desc')","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":8,"layout":{"x":73,"y":12,"width":22,"height":9},"definition":{"title":"Average CPU utilization","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"query_value","requests":[{"q":"avg:azure.vm.percentage_cpu{$tenant,$subscription,$region,$group,$app}","aggregator":"avg"}],"autoscale":true,"custom_unit":"%","text_align":"center","custom_links":[],"precision":1}},{"id":9,"layout":{"x":23,"y":3,"width":117,"height":8},"definition":{"type":"note","content":"Virtual Machines","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":10,"layout":{"x":4,"y":64,"width":67,"height":18},"definition":{"title":"Requests by name","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:azure.app_services.requests{$app,$group,$region,$subscription,$tenant} by {name}.as_count()","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":11,"layout":{"x":21,"y":54,"width":16,"height":9},"definition":{"title":"Avg response time","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:azure.app_services.average_response_time{$app,$group,$region,$subscription,$tenant}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"white_on_red","value":50},{"comparator":">=","palette":"white_on_yellow","value":45},{"comparator":"<","palette":"white_on_green","value":45}]}],"autoscale":true,"custom_links":[],"precision":2}},{"id":12,"layout":{"x":4,"y":54,"width":16,"height":9},"definition":{"title":"Web apps","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.app_services.count{$tenant,$subscription,$region,$group,$app}.fill(null), 0)","aggregator":"avg"}],"custom_links":[],"precision":0}},{"id":13,"layout":{"x":38,"y":54,"width":16,"height":9},"definition":{"title":"Functions","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.functions.count{$tenant,$subscription,$region,$group,$app}.fill(null), 0)","aggregator":"max"}],"autoscale":true,"custom_links":[],"precision":0}},{"id":14,"layout":{"x":124,"y":54,"width":16,"height":9},"definition":{"title":"Healthy backups","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"100*sum:azure.sql_servers_databases.replication_links.count{state:catch_up,$tenant,$subscription,$region,$group,$app}/sum:azure.sql_servers_databases.replication_links.count{$tenant,$subscription,$region,$group,$app}","aggregator":"avg","conditional_formats":[{"comparator":">=","palette":"white_on_green","value":99},{"comparator":">=","palette":"white_on_yellow","value":90},{"comparator":">=","palette":"white_on_red","value":0}]}],"autoscale":true,"custom_unit":"%","custom_links":[],"precision":0}},{"id":15,"layout":{"x":107,"y":54,"width":16,"height":9},"definition":{"title":"Backup servers","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.sql_servers_databases.replication_links.count{$tenant,$subscription,$region,$group,$app}","aggregator":"last"}],"autoscale":true,"custom_links":[],"precision":0}},{"id":16,"layout":{"x":73,"y":84,"width":68,"height":8},"definition":{"type":"note","content":"Load Balancers","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":17,"layout":{"x":73,"y":93,"width":16,"height":8},"definition":{"title":"Standard lbs","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.network_loadbalancers.count{sku_name:standard,$tenant,$subscription,$region,$group,$app}.fill(null), 0)","aggregator":"last"}],"autoscale":true,"custom_links":[],"precision":0}},{"id":18,"layout":{"x":90,"y":93,"width":16,"height":8},"definition":{"title":"Basic lbs","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.network_loadbalancers.count{sku_name:basic,$tenant,$subscription,$region,$group,$app}.fill(null), 0)","aggregator":"max"}],"autoscale":true,"custom_links":[],"precision":0}},{"id":19,"layout":{"x":73,"y":143,"width":68,"height":18},"definition":{"title":"Packet count by lb","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"sum:azure.network_loadbalancers.packet_count{$region,$subscription,$tenant,$group,$app} by {name,resource_group,region}.as_count()","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":20,"layout":{"x":73,"y":123,"width":68,"height":19},"definition":{"title":"SNAT Connections","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"sum:azure.network_loadbalancers.snat_connection_count{$tenant,$subscription,$region,$group,$app} by {name,region,resource_group}.as_count()","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":21,"layout":{"x":4,"y":84,"width":67,"height":8},"definition":{"type":"note","content":"Usage and Quotas","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":22,"layout":{"x":38,"y":93,"width":16,"height":8},"definition":{"title":"Storage accounts","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.usage.current_value{$tenant,$subscription,$region,$group,$app,usage_name:storageaccounts}","aggregator":"last"}],"autoscale":true,"custom_links":[],"precision":2}},{"id":23,"layout":{"x":55,"y":93,"width":16,"height":8},"definition":{"title":"Storage capacity","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.storage.used_capacity{$tenant,$region,$group,$subscription,$app}","aggregator":"last"}],"autoscale":true,"custom_links":[],"precision":2}},{"id":24,"layout":{"x":4,"y":122,"width":67,"height":19},"definition":{"title":"Highest regional vCPUs quota consumption, %","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:azure.usage.percentage{$tenant,$subscription,$region,$group,$app,usage_name:cores} by {region,subscription_name}, 5, 'mean', 'desc')","conditional_formats":[{"comparator":"<","palette":"white_on_green","value":0.5},{"comparator":">","palette":"white_on_red","value":0.9},{"comparator":">=","palette":"white_on_yellow","value":0.5}]}],"custom_links":[]}},{"id":25,"layout":{"x":125,"y":93,"width":16,"height":8},"definition":{"title":"VIP availability","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:azure.network_loadbalancers.data_path_availability{$tenant,$subscription,$region,$group,$app}","aggregator":"avg"}],"autoscale":true,"custom_unit":"%","custom_links":[],"precision":2}},{"id":26,"layout":{"x":4,"y":93,"width":17,"height":8},"definition":{"title":"vCPU cores","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.usage.current_value{usage_name:cores,$tenant,$subscription,$region,$group,$app}","aggregator":"last"}],"autoscale":true,"custom_links":[],"precision":0}},{"id":27,"layout":{"x":55,"y":54,"width":16,"height":9},"definition":{"title":"Executions","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.functions.function_execution_count{$tenant,$subscription,$region,$group,$app}.as_count()","aggregator":"sum"}],"autoscale":true,"custom_links":[],"precision":2}},{"id":28,"layout":{"x":40,"y":12,"width":15,"height":9},"definition":{"title":"Stopped Deallocated","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$region,$subscription,$tenant,$group,$app,status:stopped_deallocated}.fill(null), 0)","aggregator":"max"}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0}},{"id":29,"layout":{"x":56,"y":12,"width":15,"height":9},"definition":{"title":"Unavailable","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"sum:azure.vm.count{$region,$subscription,$tenant,$group,$app,status:stopped}.fill(null)+sum:azure.vm.count{$region,$subscription,$tenant,$group,$app,status:unavailable}.fill(null)+sum:azure.vm.count{$region,$subscription,$tenant,$group,$app,status:failed}.fill(null)","aggregator":"max"}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0}},{"id":30,"layout":{"x":73,"y":54,"width":16,"height":9},"definition":{"title":"Connections ","title_size":"16","title_align":"left","time":{"live_span":"1h"},"type":"query_value","requests":[{"q":"sum:azure.sql_servers_databases.connection_successful{$tenant,$subscription,$region,$group,$app}.as_count()","aggregator":"sum"}],"autoscale":false,"custom_unit":"conns","text_align":"center","custom_links":[],"precision":0}},{"id":31,"layout":{"x":90,"y":54,"width":16,"height":9},"definition":{"title":"CPU Utilization","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:azure.sql_servers_databases.cpu_percent{$tenant,$subscription,$group,$region,$app}","aggregator":"avg"}],"custom_links":[],"precision":2}},{"id":32,"layout":{"x":73,"y":103,"width":68,"height":19},"definition":{"title":"Network I/O by Bytes","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:azure.network_loadbalancers.byte_count{direction:out,$region,$group,$subscription,$tenant,$app}.as_count()","style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"area"},{"q":"0-sum:azure.network_loadbalancers.byte_count{direction:in,$region,$group,$subscription,$tenant,$app}.as_count()","style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":33,"layout":{"x":4,"y":142,"width":67,"height":18},"definition":{"title":"Highest regional network quota consumption, %","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:azure.usage.percentage{$tenant,$subscription,$region,usage_category:virtual_network,!usage_name:networkwatchers,$group,$app} by {region,subscription_name,usage_name}, 5, 'mean', 'desc')","conditional_formats":[{"comparator":"<","palette":"white_on_green","value":0.5},{"comparator":">","palette":"white_on_red","value":0.9},{"comparator":">=","palette":"white_on_yellow","value":0.5}]}],"custom_links":[]}},{"id":34,"layout":{"x":4,"y":102,"width":67,"height":19},"definition":{"title":"vCPUs per region","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:azure.usage.current_value{usage_category:compute,usage_name:cores,$tenant,$subscription,$region,$group,$app} by {region,subscription_name}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":35,"layout":{"x":22,"y":93,"width":15,"height":8},"definition":{"title":"Public IP Addresses","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.usage.current_value{$tenant,$subscription,$region,$group,$app,usage_name:publicipaddresses}","aggregator":"last"}],"autoscale":true,"custom_links":[],"precision":2}},{"id":36,"layout":{"x":107,"y":93,"width":17,"height":8},"definition":{"title":"Backend pool host count","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.sql_servers_databases.count{$tenant,$subscription,$region,$group,$app}","aggregator":"last"}],"custom_links":[],"precision":0}},{"id":37,"layout":{"x":4,"y":22,"width":67,"height":21},"definition":{"title":"VMs by status","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:azure.vm.count{$region,$subscription,$tenant,$group,$app} by {status}.fill(null)","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}}],"template_variables":[{"name":"tenant","default":"*","prefix":"tenant_name"},{"name":"subscription","default":"*","prefix":"subscription_name"},{"name":"region","default":"*","prefix":"region"},{"name":"group","default":"*","prefix":"resource_group"},{"name":"app","default":"*","prefix":"name"}],"layout_type":"free","is_read_only":true,"notify_list":[],"id":71}