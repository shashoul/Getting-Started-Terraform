{"title":"Infrastructure Overview","description":"","widgets":[{"id":5150852001778284,"layout":{"x":8,"y":7,"width":24,"height":17},"definition":{"title":"Avg CPU Usage","title_size":"16","title_align":"center","type":"query_value","requests":[{"q":"avg:mongodb.atlas.system.cpu.norm.guest{*}+avg:mongodb.atlas.system.cpu.norm.iowait{*}+avg:mongodb.atlas.system.cpu.norm.irq{*}+avg:mongodb.atlas.system.cpu.mongoprocess.norm.kernel{*}+avg:mongodb.atlas.system.cpu.norm.nice{*}+avg:mongodb.atlas.system.cpu.norm.softirq{*}+avg:mongodb.atlas.system.cpu.norm.steal{*}+avg:mongodb.atlas.system.cpu.norm.user{*}","aggregator":"avg","conditional_formats":[{"comparator":"<","palette":"white_on_green","value":7},{"comparator":"<","palette":"white_on_yellow","value":8},{"comparator":">=","palette":"white_on_red","value":8}]}],"autoscale":true,"custom_unit":"%","precision":2}},{"id":8427834222730742,"layout":{"x":32,"y":7,"width":24,"height":17},"definition":{"title":"AVG Free Disk Space","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:mongodb.atlas.system.disk.space.free{*}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"white_on_red","value":98500000000},{"comparator":">","palette":"white_on_yellow","value":97000000000},{"comparator":"<","palette":"white_on_green","value":97000000000}]}],"autoscale":true,"precision":2}},{"id":7193473161302754,"layout":{"x":100,"y":7,"width":64,"height":52},"definition":{"title":"Mongo - Service Summary","title_size":"16","title_align":"left","type":"trace_service","env":"development","service":"mongo","span_name":"mongo.query","show_hits":true,"show_errors":true,"show_latency":true,"show_breakdown":true,"show_distribution":true,"show_resource_list":false,"size_format":"medium","display_format":"one_column"}},{"id":2158390211504750,"layout":{"x":56,"y":41,"width":44,"height":18},"definition":{"title":"Avg Total Disk IOPS","title_size":"16","title_align":"center","type":"query_value","requests":[{"q":"avg:mongodb.atlas.system.disk.iops.total{*}.as_count()","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"white_on_red","value":30000},{"comparator":">","palette":"white_on_yellow","value":28000},{"comparator":"<=","palette":"white_on_green","value":25000}]}],"autoscale":true,"precision":0}},{"id":501821874347516,"layout":{"x":56,"y":24,"width":21,"height":17},"definition":{"title":"Document Reads /s","title_size":"16","title_align":"center","show_legend":false,"type":"timeseries","requests":[{"q":"avg:mongodb.atlas.metrics.document.returned{*}.as_rate()","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[{"value":"y = 100","display_type":"error bold"},{"value":"y = 98","display_type":"warning dashed"},{"value":"y = 95","display_type":"ok dashed"}]}},{"id":7816302311568450,"layout":{"x":77,"y":24,"width":23,"height":17},"definition":{"title":"Document Writes /s","title_size":"16","title_align":"center","show_legend":false,"type":"timeseries","requests":[{"q":"sum:mongodb.atlas.metrics.document.deleted{*}.as_rate()","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"q":"sum:mongodb.atlas.metrics.document.inserted{*}.as_rate()","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"q":"sum:mongodb.atlas.metrics.document.updated{*}.as_rate()","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[{"value":"y = 4","display_type":"error bold"},{"value":"y = 3.8","display_type":"warning dashed"},{"value":"y = 3.6","display_type":"ok dashed"}]}},{"id":8894184358314866,"layout":{"x":32,"y":24,"width":24,"height":17},"definition":{"title":"Query Efficiency","title_size":"16","title_align":"center","show_legend":false,"type":"timeseries","requests":[{"q":"avg:mongodb.atlas.metrics.queryexecutor.scannedperreturned{*}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":6542018387839566,"layout":{"x":56,"y":7,"width":44,"height":17},"definition":{"title":"Memory Usage","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"max:mongodb.atlas.mem.resident{*}","on_right_yaxis":false,"metadata":[{"expression":"max:mongodb.atlas.mem.resident{*}","alias_name":"Resident"}],"style":{"palette":"purple","line_type":"dashed","line_width":"normal"},"display_type":"line"},{"q":"max:mongodb.atlas.mem.virtual{*}","on_right_yaxis":false,"metadata":[{"expression":"max:mongodb.atlas.mem.virtual{*}","alias_name":"Virtual"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":6316903348257678,"layout":{"x":8,"y":24,"width":24,"height":17},"definition":{"title":"Current Connections","title_size":"16","title_align":"center","type":"query_value","requests":[{"q":"avg:mongodb.atlas.connections.current{*}","aggregator":"last"}],"autoscale":true,"precision":0}},{"id":7424144238893282,"layout":{"x":8,"y":68,"width":28,"height":18},"definition":{"title":"Container CPU Usage","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:kubernetes.cpu.usage.total{*} by {kube_container_name}, 10, 'mean', 'desc')","conditional_formats":[{"comparator":"<=","palette":"white_on_green","value":630000000},{"comparator":">","palette":"white_on_yellow","value":650000000},{"comparator":">","palette":"white_on_red","value":680000000}]}]}},{"id":1064124904817018,"layout":{"x":135,"y":68,"width":29,"height":18},"definition":{"title":"Pods CPU Usage","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:kubernetes.cpu.usage.total{*} by {pod_name}, 10, 'mean', 'desc')","conditional_formats":[{"comparator":"<=","palette":"white_on_green","value":1790000000},{"comparator":">","palette":"white_on_yellow","value":1880000000},{"comparator":">","palette":"white_on_red","value":2000000000}]}]}},{"id":4727959968360448,"layout":{"x":62,"y":68,"width":47,"height":18},"definition":{"title":"Nodes CPU Total Usage","title_size":"16","title_align":"center","type":"query_value","requests":[{"q":"avg:kubernetes.cpu.usage.total{*}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"white_on_red","value":30000000},{"comparator":">=","palette":"white_on_yellow","value":25000000},{"comparator":"<=","palette":"white_on_green","value":20000000}]}],"autoscale":true,"precision":2}},{"id":5654958878324410,"layout":{"x":74,"y":0,"width":24,"height":6},"definition":{"type":"free_text","text":"Mongo DB ","color":"#4d4d4d","font_size":"auto","text_align":"left"}},{"id":5165338586077068,"layout":{"x":71,"y":60,"width":24,"height":6},"definition":{"type":"free_text","text":"Kubernetes","color":"#4d4d4d","font_size":"auto","text_align":"left"}},{"id":3807782015392142,"layout":{"x":32,"y":41,"width":24,"height":18},"definition":{"title":"Read requests (per second)","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"sum:mongodb.atlas.opcounters.getmore{*}.as_rate()","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"},{"q":"sum:mongodb.atlas.opcounters.query{*}.as_rate()","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":8954681299990410,"layout":{"x":8,"y":41,"width":24,"height":18},"definition":{"title":"Write requests (per second)","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"sum:mongodb.atlas.opcounters.delete{*}.as_rate()","on_right_yaxis":false,"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"area"},{"q":"avg:mongodb.atlas.opcounters.insert{*}.as_rate()","on_right_yaxis":false,"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"area"},{"q":"sum:mongodb.atlas.opcounters.update{*}.as_rate()","on_right_yaxis":false,"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":8603692315890278,"layout":{"x":36,"y":68,"width":26,"height":18},"definition":{"title":"Running Containers","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:docker.containers.running{*}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"green_on_white","value":0}]}],"autoscale":true,"precision":0}},{"id":5730008948896706,"layout":{"x":109,"y":68,"width":26,"height":18},"definition":{"title":"Stopped Containers","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:docker.containers.stopped{*}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"yellow_on_white","value":0}]}],"autoscale":true,"precision":0}},{"id":3202623939064176,"layout":{"x":62,"y":101,"width":47,"height":15},"definition":{"title":"Network in per node","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"sum:kubernetes.network.rx_bytes{*} by {host}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":8554194945357844,"layout":{"x":109,"y":86,"width":47,"height":15},"definition":{"title":"Network out per node","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"sum:kubernetes.network.tx_bytes{*} by {host}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":815917251766412,"layout":{"x":62,"y":86,"width":47,"height":15},"definition":{"title":"Network errors per node","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"sum:kubernetes.network.rx_errors{*} by {host}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"sum:kubernetes.network.tx_errors{*} by {host}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"sum:kubernetes.network_errors{*} by {host}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":3804654075244198,"layout":{"x":109,"y":101,"width":47,"height":15},"definition":{"title":"Disk reads per node","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"sum:kubernetes.io.read_bytes{*} by {replicaset,host}, avg:kubernetes_state.replicaset.replicas_ready{*} by {replicaset,host}, sum:kubernetes.io.read_bytes{*} by {replicaset,host}-avg:kubernetes_state.replicaset.replicas_ready{*} by {replicaset,host}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":7476209838514076,"layout":{"x":77,"y":117,"width":24,"height":6},"definition":{"type":"free_text","text":"AWS","color":"#4d4d4d","font_size":"auto","text_align":"left"}},{"id":7559363404768450,"layout":{"x":15,"y":86,"width":47,"height":9},"definition":{"title":"Number of Kubernetes events","title_size":"20","title_align":"center","type":"event_timeline","query":"sources:kubernetes *","tags_execution":"and"}},{"id":5424909642771854,"layout":{"x":15,"y":97,"width":47,"height":21},"definition":{"title_size":"16","title_align":"left","type":"event_stream","query":"sources:kubernetes *","tags_execution":"and","event_size":"s"}},{"id":8666087747481140,"layout":{"x":0,"y":133,"width":25,"height":12},"definition":{"title":"CPU Utilization","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:aws.ec2.cpuutilization{*}","aggregator":"avg","conditional_formats":[{"comparator":">","palette":"red_on_white","value":50},{"comparator":"<=","palette":"green_on_white","value":50}]}],"autoscale":true,"precision":2}},{"id":2073793363184752,"layout":{"x":0,"y":125,"width":50,"height":8},"definition":{"type":"note","content":"\n\nEC2","background_color":"white","font_size":"36","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":1604090131872524,"layout":{"x":25,"y":133,"width":25,"height":12},"definition":{"title":"Active Instances","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:aws.ec2.host_ok{*}","aggregator":"avg"}],"autoscale":true,"precision":2}},{"id":3981440349982430,"layout":{"x":0,"y":145,"width":50,"height":15},"definition":{"title":"EC2 CPU utilization per instance (%)","title_size":"16","title_align":"left","show_legend":false,"type":"heatmap","requests":[{"q":"avg:aws.ec2.cpuutilization{*} by {host}","style":{"palette":"dog_classic"}}]}},{"id":3694308178759814,"layout":{"x":51,"y":125,"width":51,"height":8},"definition":{"type":"note","content":"\n\nEBS","background_color":"white","font_size":"36","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":5585899383809192,"layout":{"x":51,"y":133,"width":17,"height":12},"definition":{"title":"Avg Q lengh","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:aws.ebs.volume_queue_length{*}","aggregator":"max"}],"autoscale":true,"precision":0}},{"id":8656355736521354,"layout":{"x":68,"y":133,"width":17,"height":12},"definition":{"title":"EBS volumes (sum/avg)","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:aws.ebs.volume_read_ops{*}/avg:aws.ebs.volume_read_ops{*}","aggregator":"max"}],"autoscale":true,"precision":0}},{"id":563747012560042,"layout":{"x":85,"y":133,"width":17,"height":12},"definition":{"title":"EBS volumes (Read & Writes)","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:aws.ebs.volume_read_ops{*}+sum:aws.ebs.volume_write_ops{*}","aggregator":"max"}],"autoscale":true,"precision":0}},{"id":3899343437106574,"layout":{"x":51,"y":145,"width":51,"height":15},"definition":{"title":"EBS IOps by volume","title_size":"16","title_align":"left","show_legend":false,"type":"heatmap","requests":[{"q":"avg:aws.ebs.volume_read_ops{*} by {host,device}.as_count(), avg:aws.ebs.volume_write_ops{*} by {host,device}.as_count(), avg:aws.ebs.volume_read_ops{*} by {host,device}.as_count()+avg:aws.ebs.volume_write_ops{*} by {host,device}.as_count()","style":{"palette":"dog_classic"}}]}},{"id":4952846715208292,"layout":{"x":51,"y":160,"width":51,"height":15},"definition":{"title":"EBS queue length by volume","title_size":"16","title_align":"left","show_legend":false,"type":"heatmap","requests":[{"q":"avg:aws.ebs.volume_queue_length{*} by {host,device}","style":{"palette":"dog_classic"}}]}},{"id":1871438021504712,"layout":{"x":103,"y":125,"width":40,"height":8},"definition":{"type":"note","content":"\n\nS3\n","background_color":"white","font_size":"36","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":8195951092054382,"layout":{"x":103,"y":133,"width":40,"height":14},"definition":{"title":"S3 buckets size, past week","title_size":"16","title_align":"left","show_legend":false,"time":{"live_span":"1w"},"type":"timeseries","requests":[{"q":"max:aws.s3.bucket_size_bytes{*} by {bucketname}","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":1908844696759692,"layout":{"x":103,"y":148,"width":40,"height":14},"definition":{"title":"S3 buckets number of objects, past week","title_size":"16","title_align":"left","show_legend":false,"time":{"live_span":"1w"},"type":"timeseries","requests":[{"q":"max:aws.s3.number_of_objects{*} by {bucketname}","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":7426605156910792,"layout":{"x":0,"y":161,"width":50,"height":8},"definition":{"type":"note","content":"\n\nCloudfront","background_color":"white","font_size":"36","text_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"left"}},{"id":7438161240787240,"layout":{"x":33,"y":169,"width":17,"height":12},"definition":{"title":"Requests Count","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:aws.cloudfront.requests{*}.as_count()","aggregator":"avg"}],"autoscale":true,"precision":0}},{"id":2587823546154642,"layout":{"x":16,"y":169,"width":17,"height":12},"definition":{"title":"Uploaded Bytes","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:aws.cloudfront.bytes_uploaded{*}.as_count()","aggregator":"avg"}],"autoscale":true,"precision":0}},{"id":4933582177831788,"layout":{"x":0,"y":169,"width":16,"height":12},"definition":{"title":"Downloaded Bytes","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:aws.cloudfront.bytes_downloaded{*}.as_count()","aggregator":"avg"}],"autoscale":true,"precision":0}},{"id":315490221787592,"layout":{"x":0,"y":180,"width":50,"height":15},"definition":{"title":"Error Rates","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"q":"avg:aws.cloudfront.total_error_rate{*}","on_right_yaxis":false,"metadata":[{"expression":"avg:aws.cloudfront.total_error_rate{*}","alias_name":"Total"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:aws.cloudfront.4xx_error_rate{*}","on_right_yaxis":false,"metadata":[{"expression":"avg:aws.cloudfront.4xx_error_rate{*}","alias_name":"4xx"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"avg:aws.cloudfront.5xx_error_rate{*}","on_right_yaxis":false,"metadata":[{"expression":"avg:aws.cloudfront.5xx_error_rate{*}","alias_name":"5xx"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":7027993108319450,"layout":{"x":144,"y":140,"width":32,"height":46},"definition":{"title":"AWS events (Last Week)","title_size":"13","title_align":"left","time":{"live_span":"1w"},"type":"event_stream","query":"sources:aws","tags_execution":"and","event_size":"s"}},{"id":5856911849750030,"layout":{"x":144,"y":125,"width":32,"height":15},"definition":{"type":"image","url":"/static/images/screenboard/integrations/aws.png","sizing":"fit","margin":"large"}}],"template_variables":[],"layout_type":"free","is_read_only":false,"notify_list":[],"id":"n45-6rs-6qz"}