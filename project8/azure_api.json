{"title":"Azure API Management Service","description":"This dashboard summarizes your Azure API Management Service usage. Further reading on Azure API Management Service monitoring:\n\n- [Datadog's Azure API Management Service docs](https://docs.datadoghq.com/integrations/azure_api_management/)\n\n- [Documentation on Datadog's overall integration with Azure](https://docs.datadoghq.com/integrations/azure/?tab=azurecliv20)\n\nClone this template dashboard to make changes and add your own graph widgets.","widgets":[{"id":0,"layout":{"x":0,"y":0,"width":18,"height":15},"definition":{"type":"image","url":"/static/images/logos/azure-apimanagement_avatar.svg","sizing":"fit","margin":"small"}},{"id":1,"layout":{"x":32,"y":119,"width":95,"height":18},"definition":{"title":"Backend vs Overall Duration (in ms)","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:azure.apimanagement_service.overall_duration_of_gateway_requests{$ServiceName,$ResourceGroup,$Subscription,$Region}","on_right_yaxis":false,"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"},{"q":"avg:azure.apimanagement_service.duration_of_backend_requests{$ServiceName,$ResourceGroup,$Subscription,$Region}","on_right_yaxis":false,"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":2,"layout":{"x":19,"y":59,"width":35,"height":25},"definition":{"title":"Gateway Requests (per Response Code Catagory)","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:azure.apimanagement_service.requests{$ServiceName,$ResourceGroup,$Subscription,$Region} by {gatewayresponsecodecategory}.as_count()","on_right_yaxis":false,"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":3,"layout":{"x":19,"y":7,"width":108,"height":25},"definition":{"title":"Requests by Status","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:azure.apimanagement_service.successful_requests{$ServiceName,$ResourceGroup,$Subscription,$Region}.as_count(), sum:azure.apimanagement_service.failed_requests{$ServiceName,$ResourceGroup,$Subscription,$Region}.as_count(), sum:azure.apimanagement_service.other_requests{$ServiceName,$ResourceGroup,$Subscription,$Region}.as_count(), sum:azure.apimanagement_service.unauthorized_requests{$ServiceName,$ResourceGroup,$Subscription,$Region}.as_count()","on_right_yaxis":false,"style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"}}},{"id":4,"layout":{"x":55,"y":59,"width":36,"height":25},"definition":{"title":"Backend Requests (per Response Code Catagory)","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:azure.apimanagement_service.requests{$ServiceName,$ResourceGroup,$Subscription,$Region} by {backendresponsecodecategory}.as_count()","on_right_yaxis":false,"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":5,"layout":{"x":92,"y":59,"width":35,"height":25},"definition":{"title":"Request Failure (per Error Reason)","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:azure.apimanagement_service.requests{$ServiceName,$ResourceGroup,$Subscription,$Region} by {lasterrorreason}.as_count()","on_right_yaxis":false,"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":6,"layout":{"x":19,"y":100,"width":12,"height":37},"definition":{"type":"note","content":"Utilization","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right"}},{"id":7,"layout":{"x":19,"y":0,"width":108,"height":6},"definition":{"type":"note","content":"Requests","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":8,"layout":{"x":32,"y":100,"width":95,"height":20},"definition":{"type":"query_table","requests":[{"aggregator":"last","cell_display_mode":["bar"],"q":"avg:azure.apimanagement_service.capacity{$Region,$ResourceGroup,$ServiceName} by {name,resource_group,region}","alias":"Utilization","limit":100,"order":"desc"}],"custom_links":[]}},{"id":9,"layout":{"x":129,"y":119,"width":14,"height":18},"definition":{"type":"note","content":"Use this widget to identify unusual spikes in your API Gateway's request duration by comparing them to your backend's duration.","background_color":"yellow","font_size":"14","text_align":"left","show_tick":true,"tick_pos":"50%","tick_edge":"left"}},{"id":10,"layout":{"x":4,"y":62,"width":14,"height":18},"definition":{"type":"note","content":"Correlate your request metrics across their Status, Gateway Response, Backend Response, and Errors.","background_color":"yellow","font_size":"14","text_align":"left","show_tick":true,"tick_pos":"50%","tick_edge":"right"}},{"id":11,"layout":{"x":55,"y":85,"width":36,"height":16},"definition":{"type":"query_table","requests":[{"aggregator":"sum","cell_display_mode":["bar"],"q":"exclude_null(sum:azure.apimanagement_service.requests{$Region,$ResourceGroup,$ServiceName,$Subscription} by {backendresponsecode}.as_count())","alias":"Total Requests","limit":10,"order":"desc"}],"custom_links":[]}},{"id":12,"layout":{"x":19,"y":85,"width":35,"height":16},"definition":{"type":"query_table","requests":[{"aggregator":"sum","cell_display_mode":["bar"],"q":"exclude_null(sum:azure.apimanagement_service.requests{$Region,$ResourceGroup,$ServiceName,$Subscription} by {gatewayresponsecode}.as_count())","alias":"Total Requests","limit":10,"order":"desc"}],"custom_links":[]}},{"id":13,"layout":{"x":92,"y":85,"width":35,"height":16},"definition":{"type":"query_table","requests":[{"aggregator":"sum","cell_display_mode":["bar"],"q":"exclude_null(sum:azure.apimanagement_service.requests{$Region,$ResourceGroup,$ServiceName,$Subscription} by {lasterrorreason}.as_count())","alias":"Total Requests","limit":10,"order":"desc"}],"custom_links":[]}},{"id":14,"layout":{"x":0,"y":16,"width":18,"height":7},"definition":{"title":"Account Status: Online","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.apimanagement_service.count{status:running}","aggregator":"last","conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}]}],"autoscale":true,"custom_links":[],"precision":0}},{"id":15,"layout":{"x":19,"y":33,"width":108,"height":25},"definition":{"title":"Gateway Requests (per Response Code)","title_size":"16","title_align":"left","show_legend":true,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:azure.apimanagement_service.requests{$ServiceName,$ResourceGroup,$Subscription,$Region} by {gatewayresponsecode}.as_count()","on_right_yaxis":false,"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"}}}],"template_variables":[{"name":"Region","default":"*","prefix":"region"},{"name":"ResourceGroup","default":"*","prefix":"resource_group"},{"name":"ServiceName","default":"*","prefix":"name"},{"name":"Subscription","default":"*","prefix":"subscription_name"}],"layout_type":"free","is_read_only":true,"notify_list":[],"id":30394}