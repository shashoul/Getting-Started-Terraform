{"title":"Continuous Profiler JVM overview","description":"Metrics gathered from Datadog Continuous Profiler on all Java Virtual Machine applications","widgets":[{"id":0,"layout":{"x":0,"y":0,"width":81,"height":6},"definition":{"type":"note","content":"# Service Performance","background_color":"gray","font_size":"14","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":1,"layout":{"x":0,"y":7,"width":12,"height":18},"definition":{"type":"note","content":"## CPU","background_color":"blue","font_size":"14","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right"}},{"id":2,"layout":{"x":13,"y":7,"width":28,"height":18},"definition":{"title":"CPU - Cores","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host runtime:jvm"},"group_by":[{"facet":"service","sort":{"facet":"@prof_core_cpu_cores","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_core_cpu_cores","aggregation":"sum"}}}],"custom_links":[{"link":"https://app.datadoghq.com/apm/service/{{service.value}}","label":"service page"}]}},{"id":3,"layout":{"x":0,"y":26,"width":12,"height":18},"definition":{"type":"note","content":"## Memory Allocation\n\nHeap Memory allocated, that may be subsequently freed by GC.","background_color":"orange","font_size":"14","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right"}},{"id":4,"layout":{"x":13,"y":26,"width":28,"height":18},"definition":{"title":"Memory Allocation - Bytes per second","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host runtime:jvm"},"group_by":[{"facet":"service","sort":{"facet":"@prof_core_alloc_bytes_per_sec","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_core_alloc_bytes_per_sec","aggregation":"sum"}}}],"custom_links":[]}},{"id":5,"layout":{"x":42,"y":26,"width":39,"height":18},"definition":{"title":"Memory Allocation - Bytes per second","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host runtime:jvm"},"group_by":[{"facet":"service","sort":{"facet":"@prof_core_alloc_bytes_per_sec","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_core_alloc_bytes_per_sec","aggregation":"sum"}},"on_right_yaxis":false,"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":6,"layout":{"x":0,"y":45,"width":12,"height":14},"definition":{"type":"note","content":"## Contention\n\nTime threads spent locked. Less is better","background_color":"yellow","font_size":"14","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right"}},{"id":7,"layout":{"x":13,"y":45,"width":28,"height":14},"definition":{"title":"JVM Locks wait time - % of time","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_locks_wait_time","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_locks_wait_time","aggregation":"avg"}},"conditional_formats":[{"comparator":">","palette":"white_on_red","value":5}]}],"custom_links":[]}},{"id":8,"layout":{"x":82,"y":0,"width":67,"height":6},"definition":{"type":"note","content":"# Code level performance","background_color":"gray","font_size":"14","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":9,"layout":{"x":42,"y":7,"width":39,"height":18},"definition":{"title":"CPU - Cores","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host runtime:jvm"},"group_by":[{"facet":"service","sort":{"facet":"@prof_core_cpu_cores","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_core_cpu_cores","aggregation":"sum"}},"on_right_yaxis":false,"style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":10,"layout":{"x":42,"y":45,"width":39,"height":14},"definition":{"title":"Locks wait time - Seconds","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_locks_max_wait_time","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_locks_max_wait_time","aggregation":"avg"}},"on_right_yaxis":false,"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":11,"layout":{"x":0,"y":60,"width":12,"height":29},"definition":{"type":"note","content":"## Garbage Collection / VM operations\n\nOperations that stop all threads of applications. Less is better","background_color":"green","font_size":"14","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right"}},{"id":12,"layout":{"x":13,"y":60,"width":28,"height":14},"definition":{"title":"GC total pause - % of time","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_gc_pause_time","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_gc_pause_time","aggregation":"avg"}},"conditional_formats":[{"comparator":">","palette":"white_on_red","value":5}]}],"custom_links":[]}},{"id":13,"layout":{"x":42,"y":60,"width":39,"height":14},"definition":{"title":"GC total pause - % of time","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_gc_pause_time","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_gc_pause_time","aggregation":"avg"}},"on_right_yaxis":false,"style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":14,"layout":{"x":13,"y":75,"width":28,"height":14},"definition":{"title":"GC pause time max - Seconds","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_max_gc_pause_time","aggregation":"max","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_max_gc_pause_time","aggregation":"max"}}}],"custom_links":[]}},{"id":15,"layout":{"x":42,"y":75,"width":39,"height":14},"definition":{"title":"GC pause time max - Seconds","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_max_gc_pause_time","aggregation":"max","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_max_gc_pause_time","aggregation":"max"}},"on_right_yaxis":false,"style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":16,"layout":{"x":82,"y":7,"width":28,"height":18},"definition":{"title":"JVM CPU - by method","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_cpu_cores_by_top_methods.attributes.method","sort":{"facet":"@prof_jvm_cpu_cores_by_top_methods.value","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_cpu_cores_by_top_methods.value","aggregation":"sum"}}}],"custom_links":[]}},{"id":17,"layout":{"x":82,"y":26,"width":28,"height":18},"definition":{"title":"JVM allocation Bytes - by Method","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_alloc_bytes_per_sec_by_top_methods.attributes.method","sort":{"facet":"@prof_jvm_alloc_bytes_per_sec_by_top_methods.value","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_alloc_bytes_per_sec_by_top_methods.value","aggregation":"avg"}}}],"custom_links":[]}},{"id":18,"layout":{"x":111,"y":7,"width":38,"height":18},"definition":{"title":"JVM CPU - by method","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_cpu_cores_by_top_methods.attributes.method","sort":{"facet":"@prof_jvm_cpu_cores_by_top_methods.value","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_cpu_cores_by_top_methods.value","aggregation":"sum"}},"on_right_yaxis":false,"style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":19,"layout":{"x":111,"y":26,"width":38,"height":18},"definition":{"title":"JVM allocation Bytes - by type","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_alloc_bytes_per_sec_by_top_types.attributes.type","sort":{"facet":"@prof_jvm_alloc_bytes_per_sec_by_top_types.value","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_alloc_bytes_per_sec_by_top_types.value","aggregation":"avg"}},"on_right_yaxis":false,"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":20,"layout":{"x":82,"y":60,"width":28,"height":14},"definition":{"title":"Top Operations by Avg Duration (%)","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_operation_time_by_top_ops.attributes.operation","sort":{"facet":"@prof_jvm_operation_time_by_top_ops.value","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_operation_time_by_top_ops.value","aggregation":"avg"}}}],"custom_links":[]}},{"id":21,"layout":{"x":82,"y":45,"width":28,"height":14},"definition":{"title":"JVM locks sum - by method","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_locks_wait_time_by_top_methods.attributes.method","sort":{"facet":"@prof_jvm_locks_wait_time_by_top_methods.value","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_locks_wait_time_by_top_methods.value","aggregation":"avg"}}}],"custom_links":[]}},{"id":22,"layout":{"x":111,"y":45,"width":38,"height":14},"definition":{"title":"JVM Locks - by method","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_locks_wait_time_by_top_methods.attributes.method","sort":{"facet":"@prof_jvm_locks_wait_time_by_top_methods.value","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_locks_wait_time_by_top_methods.value","aggregation":"avg"}},"on_right_yaxis":false,"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":23,"layout":{"x":111,"y":60,"width":38,"height":14},"definition":{"title":"Top Operations by Avg Duration (%)","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_operation_time_by_top_ops.attributes.operation","sort":{"facet":"@prof_jvm_operation_time_by_top_ops.value","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_operation_time_by_top_ops.value","aggregation":"avg"}},"on_right_yaxis":false,"style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":24,"layout":{"x":111,"y":75,"width":38,"height":14},"definition":{"title":"Top Operations by Max Duration","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_max_operation_time_by_top_ops.attributes.operation","sort":{"facet":"@prof_jvm_max_operation_time_by_top_ops.value","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_max_operation_time_by_top_ops.value","aggregation":"avg"}},"on_right_yaxis":false,"style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":25,"layout":{"x":82,"y":75,"width":28,"height":14},"definition":{"title":"Top Operations by Max Duration","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_max_operation_time_by_top_ops.attributes.operation","sort":{"facet":"@prof_jvm_max_operation_time_by_top_ops.value","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_max_operation_time_by_top_ops.value","aggregation":"avg"}}}],"custom_links":[]}},{"id":26,"layout":{"x":0,"y":106,"width":12,"height":15},"definition":{"type":"note","content":"## Network I/O\n\nTime spent locked socket reading or writing","background_color":"gray","font_size":"14","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right"}},{"id":27,"layout":{"x":42,"y":106,"width":39,"height":15},"definition":{"title":"Total Read Duration - % of time","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_socketio_read_time","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_socketio_read_time","aggregation":"avg"}},"on_right_yaxis":false,"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":28,"layout":{"x":13,"y":106,"width":28,"height":15},"definition":{"title":"Total Read Duration - % of time","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_socketio_read_time","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_socketio_read_time","aggregation":"avg"}}}],"custom_links":[]}},{"id":29,"layout":{"x":82,"y":106,"width":28,"height":15},"definition":{"title":"Total Write Duration - % of time","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_socketio_write_time","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_socketio_write_time","aggregation":"avg"}}}],"custom_links":[]}},{"id":30,"layout":{"x":111,"y":106,"width":38,"height":15},"definition":{"title":"Total Write Duration - % of time","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_socketio_write_time","aggregation":"avg","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_socketio_write_time","aggregation":"avg"}},"on_right_yaxis":false,"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":31,"layout":{"x":0,"y":90,"width":12,"height":15},"definition":{"type":"note","content":"## Exceptions\n\nThrown Exceptions (caught + uncaught). \nLess is better.","background_color":"pink","font_size":"14","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right"}},{"id":32,"layout":{"x":13,"y":90,"width":28,"height":15},"definition":{"title":"Total Exceptions","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_throws_per_sec","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_throws_per_sec","aggregation":"sum"}}}],"custom_links":[]}},{"id":33,"layout":{"x":42,"y":90,"width":39,"height":15},"definition":{"title":"Total Exceptions","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"service","sort":{"facet":"@prof_jvm_throws_per_sec","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_throws_per_sec","aggregation":"sum"}},"on_right_yaxis":false,"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":34,"layout":{"x":82,"y":90,"width":28,"height":15},"definition":{"title":"Total Exceptions - by Class","title_size":"16","title_align":"left","type":"toplist","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_throws_per_sec_by_top_classes.attributes.class","sort":{"facet":"@prof_jvm_throws_per_sec_by_top_classes.value","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_throws_per_sec_by_top_classes.value","aggregation":"sum"}}}],"custom_links":[]}},{"id":35,"layout":{"x":111,"y":90,"width":38,"height":15},"definition":{"title":"Total Exceptions - by Class","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"profile_metrics_query":{"index":"profilemetrics","search":{"query":"$env $service $version $host"},"group_by":[{"facet":"@prof_jvm_throws_per_sec_by_top_classes.attributes.class","sort":{"facet":"@prof_jvm_throws_per_sec_by_top_classes.value","aggregation":"sum","order":"desc"},"limit":10}],"compute":{"facet":"@prof_jvm_throws_per_sec_by_top_classes.value","aggregation":"sum"}},"on_right_yaxis":false,"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}}],"template_variables":[{"name":"env","default":"*","prefix":"env"},{"name":"service","default":"*","prefix":"service"},{"name":"version","default":"*","prefix":"version"},{"name":"host","default":"*","prefix":"host"}],"layout_type":"free","is_read_only":true,"notify_list":[],"id":30392}