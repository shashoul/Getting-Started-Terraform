{"title":"Azure VM","description":"This dashboard provides a high-level overview of your Azure VM infrastructure, so you can track the health and performance of all your virtual machines and determine if they should be resized to improve performance or save costs. Further reading on Azure VM monitoring:\n\n- [Datadog's guide to key metrics for monitoring Microsoft Azure VMs](https://www.datadoghq.com/blog/how-to-monitor-microsoft-azure-vms/)\n\n- [How to collect Azure VM metrics with built-in tools](https://www.datadoghq.com/blog/how-to-collect-azure-metrics/)\n\n- [How to monitor Azure VMs with Datadog](https://www.datadoghq.com/blog/monitor-azure-vms-using-datadog/)\n\n- [Datadog's Azure VM integration docs](https://docs.datadoghq.com/integrations/azure_vm/)\n\nClone this template dashboard to make changes and add your own graph widgets.","widgets":[{"id":0,"layout":{"x":0,"y":15,"width":21,"height":14},"definition":{"title":"Total Azure VMs","title_size":"16","title_align":"center","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$tenant,$subscription,$region,$resource_group}.fill(null), 0)","aggregator":"max"}],"autoscale":false,"text_align":"center","custom_links":[],"precision":0}},{"id":1,"layout":{"x":0,"y":0,"width":21,"height":14},"definition":{"type":"image","url":"/static/images/logos/azure-vm_avatar.svg","sizing":"fit","margin":"large"}},{"id":2,"layout":{"x":89,"y":58,"width":66,"height":17},"definition":{"title":"CPU utilization by name","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"top(avg:azure.vm.percentage_cpu{$tenant,$subscription,$region,$resource_group} by {name}, 10, 'mean', 'desc')","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":3,"layout":{"x":156,"y":58,"width":37,"height":17},"definition":{"title":"Bytes read","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:azure.vm.disk_read_bytes{$tenant,$subscription,$region,$resource_group} by {name}.as_count()","style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":4,"layout":{"x":156,"y":15,"width":66,"height":6},"definition":{"type":"note","content":"[I/O](https://www.datadoghq.com/blog/how-to-monitor-microsoft-azure-vms/#toc-disk-i-o-metrics4)","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":5,"layout":{"x":89,"y":23,"width":66,"height":34},"definition":{"title":"Hosts by region","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:azure.vm.percentage_cpu{$tenant,$subscription,$region,cloud_provider:azure,$resource_group} by {host}"}},"no_metric_hosts":true,"no_group_hosts":true,"group":["region"],"scope":["$tenant","$subscription","$region","cloud_provider:azure"],"custom_links":[],"style":{"palette":"YlOrRd","palette_flip":false}}},{"id":6,"layout":{"x":89,"y":15,"width":66,"height":6},"definition":{"type":"note","content":"[CPU and Memory](https://www.datadoghq.com/blog/how-to-monitor-microsoft-azure-vms/#toc-cpu-metrics3)","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":7,"layout":{"x":156,"y":76,"width":37,"height":17},"definition":{"title":"Bytes written","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:azure.vm.disk_write_bytes{$tenant,$subscription,$region,$resource_group} by {name}.as_count()","style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":8,"layout":{"x":156,"y":41,"width":37,"height":16},"definition":{"title":"Network in","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:azure.vm.network_in{$tenant,$subscription,$region,$resource_group} by {name}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":9,"layout":{"x":156,"y":23,"width":37,"height":17},"definition":{"title":"Network out","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"avg:azure.vm.network_out{$tenant,$subscription,$region,$resource_group} by {name}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":10,"layout":{"x":89,"y":76,"width":66,"height":19},"definition":{"title":"CPU Utilization % Top 5","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:azure.vm.percentage_cpu{$tenant,$subscription,$region,$resource_group} by {name,subscription_name}, 5, 'mean', 'desc')"}],"custom_links":[]}},{"id":11,"layout":{"x":22,"y":15,"width":66,"height":6},"definition":{"type":"note","content":"Availability","background_color":"gray","font_size":"18","text_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom"}},{"id":12,"layout":{"x":22,"y":23,"width":66,"height":34},"definition":{"title":"VM count by status","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"q":"sum:azure.vm.count{$tenant,$subscription,$region,$resource_group} by {status}.fill(null)","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]}},{"id":13,"layout":{"x":22,"y":69,"width":66,"height":24},"definition":{"title":"Avg running VMs by resource group","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(sum:azure.vm.count{$tenant,$subscription,$region,status:running,$resource_group} by {resource_group,subscription_name}.fill(null), 5, 'mean', 'desc')"}],"custom_links":[]}},{"id":14,"layout":{"x":22,"y":0,"width":22,"height":14},"definition":{"title":"Running VMs","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$tenant,$subscription,$region,$resource_group,status:running}.fill(null), 0)","aggregator":"max","conditional_formats":[{"comparator":">","palette":"white_on_green","value":0}]}],"autoscale":false,"text_align":"center","custom_links":[],"precision":0}},{"id":15,"layout":{"x":46,"y":0,"width":20,"height":14},"definition":{"title":"Stopped Deallocated","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$tenant,$subscription,$region,$resource_group,status:stopped_deallocated}.fill(null), 0)","aggregator":"max"}],"autoscale":false,"text_align":"center","custom_links":[],"precision":0}},{"id":16,"layout":{"x":0,"y":44,"width":21,"height":13},"definition":{"title":"VMs in VM Scale Sets","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$tenant,$subscription,$region,$resource_group,kind:microsoft.compute/virtualmachinescalesets}.fill(null), 0)","aggregator":"max"}],"autoscale":false,"text_align":"center","custom_links":[],"precision":0}},{"id":17,"layout":{"x":0,"y":30,"width":21,"height":13},"definition":{"title":"Individual VMs","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$tenant,$subscription,$region,$resource_group,kind:none}.fill(null), 0)","aggregator":"max"}],"autoscale":false,"text_align":"center","custom_links":[],"precision":0}},{"id":18,"layout":{"x":67,"y":58,"width":21,"height":10},"definition":{"title":"Stopped","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$tenant,$subscription,$region,$resource_group,status:stopped}.fill(null), 0)","aggregator":"max"}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0}},{"id":19,"layout":{"x":22,"y":58,"width":22,"height":10},"definition":{"title":"Unknown","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$tenant,$subscription,$region,$resource_group,status:unknown}.fill(null), 0)","aggregator":"max"}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0}},{"id":20,"layout":{"x":46,"y":58,"width":19,"height":10},"definition":{"title":"Unavailable","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$tenant,$subscription,$region,$resource_group,status:unavailable}.fill(null), 0)","aggregator":"max"}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0}},{"id":21,"layout":{"x":68,"y":0,"width":20,"height":14},"definition":{"title":"Failed","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_value","requests":[{"q":"default(sum:azure.vm.count{$tenant,$subscription,$region,$resource_group,status:failed}.fill(null), 0)","aggregator":"max","conditional_formats":[{"comparator":">","palette":"white_on_red","value":0}]}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0}},{"id":22,"layout":{"x":89,"y":0,"width":32,"height":14},"definition":{"title":"Avg CPU","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:azure.vm.percentage_cpu{$tenant,$subscription,$region,$resource_group}","aggregator":"avg"}],"custom_links":[],"precision":2}},{"id":23,"layout":{"x":123,"y":0,"width":32,"height":14},"definition":{"title":"Max CPU","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:azure.vm.percentage_cpu{$tenant,$subscription,$region,$resource_group}","aggregator":"max"}],"custom_links":[],"precision":2}},{"id":24,"layout":{"x":156,"y":0,"width":32,"height":14},"definition":{"title":"Total Network Out","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.vm.network_out{$tenant,$subscription,$region,$resource_group}","aggregator":"sum"}],"autoscale":true,"custom_links":[],"precision":2}},{"id":25,"layout":{"x":190,"y":0,"width":32,"height":14},"definition":{"title":"Total Network In","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:azure.vm.network_in{$tenant,$subscription,$region,$resource_group}","aggregator":"sum"}],"autoscale":true,"custom_links":[],"precision":2}},{"id":26,"layout":{"x":194,"y":41,"width":28,"height":16},"definition":{"title":"Network in top 5","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:azure.vm.network_in{$tenant,$subscription,$region,$resource_group} by {name}, 5, 'sum', 'desc')"}],"custom_links":[]}},{"id":27,"layout":{"x":194,"y":23,"width":28,"height":17},"definition":{"title":"Network out top 5","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:azure.vm.network_out{$tenant,$subscription,$region,$resource_group} by {name}, 5, 'sum', 'desc')"}],"custom_links":[]}},{"id":28,"layout":{"x":194,"y":58,"width":28,"height":17},"definition":{"title":"Bytes read top 5","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:azure.vm.disk_read_bytes{$tenant,$subscription,$region,$resource_group} by {name}.as_count(), 5, 'sum', 'desc')"}],"custom_links":[]}},{"id":29,"layout":{"x":194,"y":76,"width":28,"height":17},"definition":{"title":"Bytes written top 5","title_size":"16","title_align":"left","type":"toplist","requests":[{"q":"top(avg:azure.vm.disk_write_bytes{$tenant,$subscription,$region,$resource_group} by {name}.as_count(), 5, 'sum', 'desc')"}],"custom_links":[]}}],"template_variables":[{"name":"tenant","default":"*","prefix":"tenant_name"},{"name":"subscription","default":"*","prefix":"subscription_name"},{"name":"region","default":"*","prefix":"region"},{"name":"resource_group","default":"*","prefix":"resource_group"}],"layout_type":"free","is_read_only":true,"notify_list":[],"id":92}